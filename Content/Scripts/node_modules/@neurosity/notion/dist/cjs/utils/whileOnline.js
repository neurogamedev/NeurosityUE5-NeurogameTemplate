"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const rxjs_1 = require("rxjs");
const operators_1 = require("rxjs/operators");
function whileOnline({ status$, allowWhileOnSleepMode }) {
    return rxjs_1.pipe(operators_1.withLatestFrom(status$), operators_1.flatMap(([value, status]) => shouldAllowMetrics(status, allowWhileOnSleepMode)
        ? rxjs_1.of(value)
        : rxjs_1.empty()));
}
exports.whileOnline = whileOnline;
function shouldAllowMetrics(status, allowWhileOnSleepMode) {
    return (status.state === "online" &&
        (allowWhileOnSleepMode ? true : !status.sleepMode));
}
