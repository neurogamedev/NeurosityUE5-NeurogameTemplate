import { pipe, of, empty } from "rxjs";
import { flatMap, withLatestFrom } from "rxjs/operators";
export function whileOnline({ status$, allowWhileOnSleepMode }) {
    return pipe(withLatestFrom(status$), flatMap(([value, status]) => shouldAllowMetrics(status, allowWhileOnSleepMode)
        ? of(value)
        : empty()));
}
function shouldAllowMetrics(status, allowWhileOnSleepMode) {
    return (status.state === "online" &&
        (allowWhileOnSleepMode ? true : !status.sleepMode));
}
